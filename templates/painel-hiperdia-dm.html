<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HIPERDIA - Sistema de Monitoramento de Pacientes Diabéticos</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <script>tailwind.config = { theme: { extend: { colors: { primary: '#4f46e5', secondary: '#10b981', diabetes: '#f59e0b' }, borderRadius: { 'none': '0px', 'sm': '4px', DEFAULT: '8px', 'md': '12px', 'xl': '20px', '2xl': '24px', '3xl': '32px', 'full': '9999px', 'button': '8px' } } } }</script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="{{ url_for('static', filename='insulinoterapia.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='hiperdia_dm_script.js') }}" defer></script>
</head>

<body class="bg-gray-50 min-h-screen">
    <header class="bg-white shadow-sm">
      <div
        class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center"
      >
        <div class="flex items-center space-x-3">
          <div class="flex items-center">
            <div
              class="w-10 h-10 flex items-center justify-center bg-amber-500 bg-opacity-10 rounded-xl"
            >
              <div
                class="w-6 h-6 flex items-center justify-center text-amber-600"
              >
                <i class="ri-drop-line"></i>
              </div>
            </div>
            <h1
              class="ml-2 text-2xl font-bold tracking-wider text-amber-600 flex items-center"
            >
              HIPERDIA - Diabéticos
              <div
                class="w-5 h-5 flex items-center justify-center text-amber-600 ml-1"
              >
                <i class="ri-test-tube-line"></i>
              </div>
            </h1>
          </div>
          <div class="h-6 w-px bg-gray-200"></div>
          <span class="text-sm text-gray-600"
            >Sistema de Monitoramento de Pacientes Diabéticos</span
          >
        </div>
        <div class="flex items-center space-x-4">
            <div class="text-sm text-gray-600">
                <span>{{ data_atual }}</span>
            </div>
            <div class="relative">
                <button class="flex items-center text-gray-700 hover:text-amber-600">
                    <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mr-2">
                        <i class="ri-user-line"></i>
                    </div>
                    <span>Profissional APS</span>
                    <div class="w-4 h-4 flex items-center justify-center">
                        <i class="ri-arrow-down-s-line"></i>
                    </div>
                </button>
            </div>
        </div>
      </div>
    </header>
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="bg-white rounded shadow-sm p-6 mb-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Coluna da Esquerda: Filtros -->
                <div>
                    <div class="flex items-center mb-4">
                        <h2 id="acompanhamentoDiabeticosTitle" class="text-xl font-semibold text-gray-800">Painel de
                            Controle - Diabetes</h2>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Equipe</label>
                            <div class="relative">
                                <button id="diabetes-equipe-button"
                                    class="w-full bg-gray-50 hover:bg-gray-100 text-gray-700 py-2 px-3 text-left flex justify-between items-center border-b-2 border-gray-200 focus:border-amber-500 transition-colors duration-200 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="w-6 h-6 flex items-center justify-center text-amber-600 mr-2">
                                            <i class="ri-team-line"></i>
                                        </div>
                                        <span id="diabetes-equipe-button-text">Todas as equipes</span>
                                    </div>
                                    <div class="w-4 h-4 flex items-center justify-center">
                                        <i class="ri-arrow-down-s-line"></i>
                                    </div>
                                </button>
                                <div id="diabetes-equipe-dropdown"
                                    class="hidden absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border border-gray-200 max-h-60 overflow-auto">
                                    <div id="diabetes-equipe-dropdown-content" class="p-2">
                                        <!-- Conteúdo populado via JS -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Microárea</label>
                            <div class="relative">
                                <button id="diabetes-microarea-button"
                                    class="w-full bg-gray-50 hover:bg-gray-100 text-gray-700 py-2 px-3 text-left flex justify-between items-center border-b-2 border-gray-200 focus:border-amber-500 transition-colors duration-200 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="w-6 h-6 flex items-center justify-center text-amber-600 mr-2">
                                            <i class="ri-map-pin-line"></i>
                                        </div>
                                        <span id="diabetes-microarea-button-text">Todas as microáreas</span>
                                    </div>
                                    <div class="w-4 h-4 flex items-center justify-center">
                                        <i class="ri-arrow-down-s-line"></i>
                                    </div>
                                </button>
                                <div id="diabetes-microarea-dropdown"
                                    class="hidden absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border border-gray-200 max-h-60 overflow-auto">
                                    <div id="diabetes-microarea-dropdown-content" class="p-2">
                                        <!-- Conteúdo populado via JS -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label for="diabetes-busca-input" class="block text-sm font-medium text-gray-700 mb-1">Buscar
                                Paciente</label>
                            <div class="relative">
                                <input type="text" id="diabetes-busca-input"
                                    class="w-full pl-10 pr-4 py-2 border-b-2 border-gray-200 focus:border-amber-500 bg-gray-50 focus:bg-white transition-colors duration-200"
                                    placeholder="Digite o nome do paciente...">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center">
                                    <div class="w-5 h-5 flex items-center justify-center text-gray-400">
                                        <i class="ri-search-line"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Coluna da Direita: Resumo de Dados -->
                <div>
                    <div class="flex items-center mb-4">
                        <h2 class="text-xl font-semibold text-gray-800">Resumo</h2>
                    </div>
                    <!-- Grid Principal: Total Diabéticos (esquerda, 2 linhas) + 4 cards menores (direita, 2x2) -->
                    <div class="grid grid-cols-3 gap-4">
                        <!-- Total Diabéticos - Card Grande (ocupa 2 linhas) -->
                        <div class="row-span-2 bg-amber-50 p-6 rounded-lg border border-amber-200 flex items-center">
                            <div class="w-12 h-12 flex items-center justify-center text-amber-600 mr-4">
                                <i class="ri-drop-line text-3xl"></i>
                            </div>
                            <div>
                                <p class="text-sm text-amber-600 font-medium">Total de Diabéticos</p>
                                <p id="total-diabeticos" class="text-3xl font-bold text-amber-700">0</p>
                            </div>
                        </div>

                        <!-- Controlados -->
                        <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                            <div class="flex items-center">
                                <div class="w-8 h-8 flex items-center justify-center text-green-600 mr-3">
                                    <i class="ri-check-line"></i>
                                </div>
                                <div>
                                    <p class="text-xs text-green-600 font-medium">Controlados</p>
                                    <p id="total-controlados" class="text-2xl font-bold text-green-700">0</p>
                                </div>
                            </div>
                        </div>

                        <!-- Descompensados -->
                        <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                            <div class="flex items-center">
                                <div class="w-8 h-8 flex items-center justify-center text-red-600 mr-3">
                                    <i class="ri-alert-line"></i>
                                </div>
                                <div>
                                    <p class="text-xs text-red-600 font-medium">Descompensados</p>
                                    <p id="total-descompensados" class="text-2xl font-bold text-red-700">0</p>
                                </div>
                            </div>
                        </div>

                        <!-- Em Análise -->
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                            <div class="flex items-center">
                                <div class="w-8 h-8 flex items-center justify-center text-blue-600 mr-3">
                                    <i class="ri-search-line"></i>
                                </div>
                                <div>
                                    <p class="text-xs text-blue-600 font-medium">Em Análise</p>
                                    <p id="total-em-analise" class="text-2xl font-bold text-blue-700">0</p>
                                </div>
                            </div>
                        </div>

                        <!-- Sem Avaliação -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center">
                                <div class="w-8 h-8 flex items-center justify-center text-gray-600 mr-3">
                                    <i class="ri-questionnaire-line"></i>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-600 font-medium">Sem Avaliação</p>
                                    <p id="total-sem-avaliacao" class="text-2xl font-bold text-gray-700">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Abas de Status -->
        <div class="bg-white rounded shadow-sm mb-6">
            <div class="border-b border-gray-200">
                <nav class="-mb-px flex space-x-8 px-6" aria-label="Tabs">
                    <button class="diabetes-status-tab-btn bg-white text-gray-700 py-3 px-4 text-sm font-medium border-b-2 border-transparent hover:text-amber-600 hover:border-amber-300 whitespace-nowrap active" data-status-filter="Todos" data-active-bg="bg-white" data-active-text="text-amber-600" data-active-border="border-amber-500" data-inactive-bg="bg-white" data-inactive-text="text-gray-700" data-inactive-border="border-transparent">
                        <div class="flex items-center">
                            <div class="w-5 h-5 flex items-center justify-center mr-2">
                                <i class="ri-list-check-2"></i>
                            </div>
                            <span>Todos</span>
                        </div>
                    </button>
                    <button class="diabetes-status-tab-btn bg-white text-gray-700 py-3 px-4 text-sm font-medium border-b-2 border-transparent hover:text-green-600 hover:border-green-300 whitespace-nowrap" data-status-filter="Controlados" data-active-bg="bg-white" data-active-text="text-green-600" data-active-border="border-green-500" data-inactive-bg="bg-white" data-inactive-text="text-gray-700" data-inactive-border="border-transparent">
                        <div class="flex items-center">
                            <div class="w-5 h-5 flex items-center justify-center text-green-600 mr-2">
                                <i class="ri-check-line"></i>
                            </div>
                            <span>Controlados</span>
                        </div>
                    </button>
                    <button class="diabetes-status-tab-btn bg-white text-gray-700 py-3 px-4 text-sm font-medium border-b-2 border-transparent hover:text-red-600 hover:border-red-300 whitespace-nowrap" data-status-filter="Descompensados" data-active-bg="bg-white" data-active-text="text-red-600" data-active-border="border-red-500" data-inactive-bg="bg-white" data-inactive-text="text-gray-700" data-inactive-border="border-transparent">
                        <div class="flex items-center">
                            <div class="w-5 h-5 flex items-center justify-center text-red-600 mr-2">
                                <i class="ri-alert-line"></i>
                            </div>
                            <span>Descompensados</span>
                        </div>
                    </button>
                    <button class="diabetes-status-tab-btn bg-white text-gray-700 py-3 px-4 text-sm font-medium border-b-2 border-transparent hover:text-blue-800 hover:border-blue-300 whitespace-nowrap" data-status-filter="EmAnalise" data-active-bg="bg-white" data-active-text="text-blue-800" data-active-border="border-blue-800" data-inactive-bg="bg-white" data-inactive-text="text-gray-700" data-inactive-border="border-transparent">
                        <div class="flex items-center">
                            <div class="w-5 h-5 flex items-center justify-center text-blue-800 mr-2">
                                <i class="ri-search-line"></i>
                            </div>
                            <span>Em Análise</span>
                        </div>
                    </button>
                    <button class="diabetes-status-tab-btn bg-white text-gray-700 py-3 px-4 text-sm font-medium border-b-2 border-transparent hover:text-gray-600 hover:border-gray-300 whitespace-nowrap" data-status-filter="SemAvaliacao" data-active-bg="bg-white" data-active-text="text-gray-600" data-active-border="border-gray-600" data-inactive-bg="bg-white" data-inactive-text="text-gray-700" data-inactive-border="border-transparent">
                        <div class="flex items-center">
                            <div class="w-5 h-5 flex items-center justify-center text-gray-600 mr-2">
                                <i class="ri-questionnaire-line"></i>
                            </div>
                            <span>Sem Avaliação</span>
                        </div>
                    </button>
                </nav>
            </div>
        </div>

        <!-- Lista de Pacientes -->
        <div class="bg-white rounded shadow-sm">
            <div class="px-6 py-4 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-900">Pacientes Diabéticos</h3>
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-2">
                            <button id="selecionar-todos-diabetes" class="text-sm text-amber-600 hover:text-amber-700 font-medium">
                                Selecionar Todos
                            </button>
                            <span class="text-gray-300">|</span>
                            <button id="desmarcar-todos-diabetes" class="text-sm text-gray-600 hover:text-gray-700 font-medium">
                                Desmarcar Todos
                            </button>
                        </div>
                        <button id="gerar-receituario-diabetes" class="bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors">
                            <div class="flex items-center">
                                <div class="w-4 h-4 flex items-center justify-center mr-2">
                                    <i class="ri-file-text-line"></i>
                                </div>
                                <span>Gerar Receituário</span>
                            </div>
                        </button>
                        <button id="gerar-relatorio-diabetes" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors">
                            <div class="flex items-center">
                                <div class="w-4 h-4 flex items-center justify-center mr-2">
                                    <i class="ri-file-chart-line"></i>
                                </div>
                                <span>Gerar Relatório</span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
            <div id="diabetes-loading" class="flex justify-center items-center p-8">
                <div class="text-gray-500">Carregando pacientes...</div>
            </div>
            <div id="diabetes-pacientes-container" class="hidden">
                <div id="diabetes-pacientes-lista">
                    <!-- Lista de pacientes será populada aqui via JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <!-- Modal Timeline -->
    <div id="timeline-modal-diabetes" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-40">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="flex justify-between items-center mb-4">
                        <h3 id="timeline-modal-title-diabetes" class="text-lg leading-6 font-medium text-gray-900">
                            Editar Ações - Timeline de Acompanhamento
                        </h3>
                        <button id="close-timeline-modal-diabetes" class="text-gray-400 hover:text-gray-600">
                            <i class="ri-close-line text-xl"></i>
                        </button>
                    </div>
                    
                    <div class="mb-4 flex space-x-2">
                        <button class="timeline-filter-btn-diabetes active bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm" data-filter="todos">
                            Todos
                        </button>
                        <button class="timeline-filter-btn-diabetes bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm" data-filter="solicitar_mrg">
                            Solicitar Mapeamento Residencial de Glicemias
                        </button>
                        <button class="timeline-filter-btn-diabetes bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm" data-filter="avaliar_mrg">
                            Avaliar Mapeamento Residencial de Glicemias
                        </button>
                        <button class="timeline-filter-btn-diabetes bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm" data-filter="tratamento">
                            Tratamento
                        </button>
                    </div>
                    
                    <div id="timeline-content-diabetes" class="max-h-96 overflow-y-auto">
                        <!-- Timeline será populada aqui -->
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button id="add-action-btn-diabetes" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-amber-600 text-base font-medium text-white hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 sm:ml-3 sm:w-auto sm:text-sm">
                        <div class="flex items-center">
                            <div class="w-4 h-4 flex items-center justify-center mr-2">
                                <i class="ri-add-line"></i>
                            </div>
                            <span>Adicionar Ação</span>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Registro de Ação -->
    <div id="register-action-modal-diabetes" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg leading-6 font-medium text-gray-900">
                            Registrar Nova Ação
                        </h3>
                        <button id="close-register-modal-diabetes" class="text-gray-400 hover:text-gray-600">
                            <i class="ri-close-line text-xl"></i>
                        </button>
                    </div>
                    
                    <form id="action-form-diabetes" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Ação</label>
                            <div class="grid grid-cols-2 gap-3">
                                <button type="button" class="action-type-tab-diabetes flex items-center py-3 px-4 border border-gray-200 bg-white rounded-lg text-left transition-colors duration-200 hover:bg-gray-50 text-gray-600 min-h-[60px]" data-action-value="1">
                                    <i class="ri-calendar-check-line text-xl mr-2 text-blue-500 flex-shrink-0"></i>
                                    <span class="text-sm font-medium leading-tight">Agendar Novo Acompanhamento</span>
                                </button>

                                <button type="button" class="action-type-tab-diabetes flex items-center py-3 px-4 border border-gray-200 bg-white rounded-lg text-left transition-colors duration-200 hover:bg-gray-50 text-gray-600 min-h-[60px]" data-action-value="4">
                                    <i class="ri-stethoscope-line text-xl mr-2 text-cyan-500 flex-shrink-0"></i>
                                    <span class="text-sm font-medium leading-tight">Avaliar Tratamento</span>
                                </button>

                                <button type="button" class="action-type-tab-diabetes flex items-center py-3 px-4 border border-gray-200 bg-white rounded-lg text-left transition-colors duration-200 hover:bg-gray-50 text-gray-600 min-h-[60px]" data-action-value="5">
                                    <i class="ri-capsule-line text-xl mr-2 text-purple-500 flex-shrink-0"></i>
                                    <span class="text-sm font-medium leading-tight">Modificar Tratamento</span>
                                </button>

                                <button type="button" class="action-type-tab-diabetes flex items-center py-3 px-4 border border-gray-200 bg-white rounded-lg text-left transition-colors duration-200 hover:bg-gray-50 text-gray-600 min-h-[60px]" data-action-value="13">
                                    <i class="ri-syringe-line text-xl mr-2 text-orange-500 flex-shrink-0"></i>
                                    <span class="text-sm font-medium leading-tight">Iniciar/Monitorar Insulinoterapia</span>
                                </button>

                                <button type="button" class="action-type-tab-diabetes flex items-center py-3 px-4 border border-gray-200 bg-white rounded-lg text-left transition-colors duration-200 hover:bg-gray-50 text-gray-600 min-h-[60px]" data-action-value="7">
                                    <i class="ri-user-heart-line text-xl mr-2 text-pink-500 flex-shrink-0"></i>
                                    <span class="text-sm font-medium leading-tight">Encaminhar para Endocrinologia</span>
                                </button>

                                <button type="button" class="action-type-tab-diabetes flex items-center py-3 px-4 border border-gray-200 bg-white rounded-lg text-left transition-colors duration-200 hover:bg-gray-50 text-gray-600 min-h-[60px]" data-action-value="8">
                                    <i class="ri-apple-line text-xl mr-2 text-green-500 flex-shrink-0"></i>
                                    <span class="text-sm font-medium leading-tight">Encaminhar para Nutrição</span>
                                </button>

                                <button type="button" class="action-type-tab-diabetes flex items-center py-3 px-4 border border-gray-200 bg-white rounded-lg text-left transition-colors duration-200 hover:bg-gray-50 text-gray-600 min-h-[60px]" data-action-value="12">
                                    <i class="ri-checkbox-circle-line text-xl mr-2 text-amber-500 flex-shrink-0"></i>
                                    <span class="text-sm font-medium leading-tight">Finalizar Acompanhamento</span>
                                </button>
                            </div>
                            <!-- Hidden input para armazenar o valor selecionado -->
                            <input type="hidden" id="cod-acao-diabetes" value="">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Data da Ação</label>
                            <input type="date" id="data-acao-diabetes" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                        </div>

                        <!-- Card Informativo - Agendar Novo Acompanhamento -->
                        <div id="card-info-agendar-diabetes" class="hidden bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-md">
                            <div class="flex items-start">
                                <div class="flex-shrink-0">
                                    <i class="ri-information-line text-blue-600 text-xl"></i>
                                </div>
                                <div class="ml-3 flex-1">
                                    <h4 class="text-sm font-semibold text-blue-800 mb-2">Ações do Novo Acompanhamento:</h4>
                                    <ul class="list-disc list-inside text-sm text-blue-700 space-y-1">
                                        <li>Mapear Glicemias</li>
                                        <li>Solicitar exames - Hemoglobina Glicada, Glicemia de Jejum, Outros</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Container para cards informativos dinâmicos -->
                        <div id="card-info-container-diabetes" class="hidden"></div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Observações</label>
                            <textarea id="observacoes-diabetes" rows="3" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent" placeholder="Observações sobre a ação..."></textarea>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Responsável</label>
                            <input type="text" id="responsavel-diabetes" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent" placeholder="Nome do responsável">
                        </div>


                    </form>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button id="save-action-btn-diabetes" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-amber-600 text-base font-medium text-white hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 sm:ml-3 sm:w-auto sm:text-sm">
                        <span>Salvar</span>
                    </button>
                    <button type="button" id="cancel-action-btn-diabetes" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        Cancelar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Gerenciamento de Tratamento para Diabetes -->
    <div id="diabetes-treatmentModal"
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center p-6 border-b flex-shrink-0">
                <h3 id="diabetes-treatmentModalTitle" class="text-xl font-semibold text-gray-900">Gerenciar Tratamento</h3>
                <button id="diabetes-closeTreatmentModal" type="button" class="text-gray-400 hover:text-gray-500">
                    <div class="w-6 h-6 flex items-center justify-center">
                        <i class="ri-close-line"></i>
                    </div>
                </button>
            </div>
            <div class="p-6 overflow-y-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Coluna da Esquerda: Informações do Paciente -->
                    <div>
                        <div class="bg-gray-50 rounded-lg p-4 mb-6">
                            <div class="flex items-center mb-4">
                                <div id="diabetes-treatmentModalAvatarIniciais"
                                    class="h-16 w-16 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 text-lg font-medium mr-4">
                                    <span>AM</span>
                                </div>
                                <div>
                                    <h4 id="diabetes-treatmentModalPacienteNome" class="text-lg font-medium">Nome do Paciente</h4>
                                    <p id="diabetes-treatmentModalPacienteIdade" class="text-sm text-gray-500">Idade</p>
                                    <p id="diabetes-treatmentModalPacienteInfo" class="text-sm text-gray-500">Equipe - Área</p>
                                </div>
                            </div>
                        </div>

                        <!-- Medicamentos Atuais -->
                        <div class="mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <h5 class="text-lg font-medium text-gray-900">Medicamentos Atuais</h5>
                                <div id="diabetes-medicamentosAtivosCount" class="text-sm text-gray-500">0 medicamentos</div>
                            </div>
                            <div id="diabetes-medicamentosAtuaisContainer" class="space-y-3">
                                <!-- Medicamentos atuais serão populados via JS -->
                                <div id="diabetes-noMedicamentosMessage" class="text-center py-8 text-gray-500 hidden">
                                    <div class="w-16 h-16 mx-auto mb-4 text-gray-300">
                                        <i class="ri-medicine-bottle-line text-4xl"></i>
                                    </div>
                                    <p>Nenhum medicamento cadastrado</p>
                                    <p class="text-sm mt-1">Use o formulário ao lado para adicionar medicamentos</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Coluna da Direita: Gestão de Medicamentos -->
                    <div>
                        <form id="diabetes-treatmentForm" class="space-y-6">
                            <!-- Tipo de Ação -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-3">Ação</label>
                                <div class="grid grid-cols-1 gap-3">
                                    <button type="button" class="diabetes-treatment-action-tab active flex items-center p-3 border rounded-lg text-left transition-colors duration-200 border-amber-500 bg-amber-50 text-amber-600" data-action="add">
                                        <i class="ri-add-line text-xl mr-3 text-green-500"></i>
                                        <div>
                                            <div class="font-medium">Adicionar Medicamento</div>
                                            <div class="text-xs text-gray-500">Prescrever novo medicamento oral</div>
                                        </div>
                                    </button>
                                    <button type="button" class="diabetes-treatment-action-tab flex items-center p-3 border rounded-lg text-left transition-colors duration-200 border-gray-200 bg-white hover:bg-gray-50 text-gray-600" data-action="add-insulin">
                                        <i class="ri-medicine-bottle-fill text-xl mr-3 text-orange-500"></i>
                                        <div>
                                            <div class="font-medium">Adicionar Insulina</div>
                                            <div class="text-xs text-gray-500">Prescrever insulina com dosagem específica</div>
                                        </div>
                                    </button>
                                    <button type="button" class="diabetes-treatment-action-tab flex items-center p-3 border rounded-lg text-left transition-colors duration-200 border-gray-200 bg-white hover:bg-gray-50 text-gray-600" data-action="modify">
                                        <i class="ri-edit-line text-xl mr-3 text-blue-500"></i>
                                        <div>
                                            <div class="font-medium">Modificar Tratamento</div>
                                            <div class="text-xs text-gray-500">Ajustar dose ou frequência</div>
                                        </div>
                                    </button>
                                    <button type="button" class="diabetes-treatment-action-tab flex items-center p-3 border rounded-lg text-left transition-colors duration-200 border-gray-200 bg-white hover:bg-gray-50 text-gray-600" data-action="modify-insulin">
                                        <i class="ri-medicine-bottle-line text-xl mr-3 text-purple-500"></i>
                                        <div>
                                            <div class="font-medium">Editar Insulina</div>
                                            <div class="text-xs text-gray-500">Modificar dosagem e frequência da insulina</div>
                                        </div>
                                    </button>
                                </div>
                            </div>

                            <!-- Seção: Adicionar Medicamento -->
                            <div id="diabetes-addMedicationSection" class="space-y-4">
                                <h6 class="font-medium text-gray-900">Novo Medicamento</h6>
                                <div class="grid grid-cols-1 gap-4">
                                    <div>
                                        <label for="diabetes-novoMedicamentoNome" class="block text-sm font-medium text-gray-700 mb-1">Nome do Medicamento</label>
                                        <select id="diabetes-novoMedicamentoNome"
                                            class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                                            <option value="">Selecione o medicamento</option>
                                            <!-- Opções serão carregadas dinamicamente via JavaScript -->
                                        </select>
                                    </div>
                                    <div>
                                        <label for="diabetes-novoMedicamentoDose" class="block text-sm font-medium text-gray-700 mb-1">Dose (comprimidos por vez)</label>
                                        <select id="diabetes-novoMedicamentoDose"
                                            class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                                            <option value="">Selecione a dose</option>
                                            <option value="1">1 comprimido</option>
                                            <option value="2">2 comprimidos</option>
                                            <option value="3">3 comprimidos</option>
                                            <option value="4">4 comprimidos</option>
                                            <option value="5">5 comprimidos</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="diabetes-novoMedicamentoFrequencia" class="block text-sm font-medium text-gray-700 mb-1">Frequência (vezes por dia)</label>
                                        <select id="diabetes-novoMedicamentoFrequencia"
                                            class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                                            <option value="">Selecione a frequência</option>
                                            <option value="1">1x ao dia</option>
                                            <option value="2">2x ao dia</option>
                                            <option value="3">3x ao dia</option>
                                            <option value="4">4x ao dia</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="diabetes-novoMedicamentoDataInicio" class="block text-sm font-medium text-gray-700 mb-1">Data de Início <span class="text-gray-500 text-xs">(opcional)</span></label>
                                        <input type="date" id="diabetes-novoMedicamentoDataInicio"
                                            class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                                            placeholder="Deixe em branco para usar data atual">
                                    </div>
                                    <div>
                                        <label for="diabetes-novoMedicamentoObservacoes" class="block text-sm font-medium text-gray-700 mb-1">Observações</label>
                                        <textarea id="diabetes-novoMedicamentoObservacoes"
                                            class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent h-20"
                                            placeholder="Observações sobre o medicamento..."></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- Seção: Adicionar Insulina (Interface Especializada) -->
                            <div id="diabetes-addInsulinSection" class="space-y-4 hidden">
                                <h6 class="font-medium text-gray-900 flex items-center">
                                    <div class="w-5 h-5 flex items-center justify-center text-orange-600 mr-2">
                                        <i class="ri-medicine-bottle-fill"></i>
                                    </div>
                                    Nova Insulina
                                </h6>
                                <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                                    <div class="grid grid-cols-1 gap-4">
                                        <!-- Tipo de Insulina -->
                                        <div>
                                            <label for="diabetes-tipoInsulina" class="block text-sm font-medium text-gray-700 mb-1">Tipo de Insulina</label>
                                            <select id="diabetes-tipoInsulina"
                                                class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                                <option value="">Selecione o tipo de insulina</option>
                                                <option value="Insulina NPH">Insulina NPH</option>
                                                <option value="Insulina Regular">Insulina Regular</option>
                                                <option value="Insulina Glargina">Insulina Glargina</option>
                                                <option value="Insulina Lispro">Insulina Lispro</option>
                                            </select>
                                        </div>

                                        <!-- Frequência de Aplicação -->
                                        <div>
                                            <label for="diabetes-frequenciaInsulina" class="block text-sm font-medium text-gray-700 mb-1">Frequência de Aplicação</label>
                                            <select id="diabetes-frequenciaInsulina"
                                                class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                                <option value="">Selecione a frequência</option>
                                                <option value="1">1 vez ao dia</option>
                                                <option value="2">2 vezes ao dia</option>
                                                <option value="3">3 vezes ao dia</option>
                                                <option value="4">4 vezes ao dia</option>
                                            </select>
                                        </div>

                                        <!-- Container de Doses Dinâmico -->
                                        <div id="diabetes-dosesContainer" class="hidden">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Doses e Horários</label>
                                            <div class="bg-white border border-orange-300 rounded p-3">
                                                <div class="text-xs text-gray-600 mb-3">
                                                    <i class="ri-information-line"></i>
                                                    Configure a dose (1-100 unidades) e horário para cada aplicação
                                                </div>
                                                <div id="diabetes-dosesInputs" class="space-y-3">
                                                    <!-- Inputs de doses serão gerados dinamicamente -->
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Data de Início -->
                                        <div>
                                            <label for="diabetes-insulinaDataInicio" class="block text-sm font-medium text-gray-700 mb-1">Data de Início <span class="text-gray-500 text-xs">(opcional)</span></label>
                                            <input type="date" id="diabetes-insulinaDataInicio"
                                                class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                                                placeholder="Deixe em branco para usar data atual">
                                        </div>

                                        <!-- Observações -->
                                        <div>
                                            <label for="diabetes-insulinaObservacoes" class="block text-sm font-medium text-gray-700 mb-1">Observações</label>
                                            <textarea id="diabetes-insulinaObservacoes"
                                                class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent h-20"
                                                placeholder="Observações sobre a insulina (ex: técnica de aplicação, rotação de locais, etc.)"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Seção: Modificar Medicamento -->
                            <div id="diabetes-modifyMedicationSection" class="space-y-4 hidden">
                                <h6 class="font-medium text-gray-900">Modificar Medicamento Existente</h6>
                                <div class="grid grid-cols-1 gap-4">
                                    <div>
                                        <label for="diabetes-selectMedicamentoModificar" class="block text-sm font-medium text-gray-700 mb-1">Selecionar Medicamento</label>
                                        <select id="diabetes-selectMedicamentoModificar"
                                            class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                                            <option value="">Selecione um medicamento</option>
                                        </select>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Modificação</label>
                                            <div class="space-y-2">
                                                <label class="custom-radio">
                                                    <input type="radio" name="diabetes-modification-type" value="frequency">
                                                    <span class="radio-mark"></span>
                                                    Alterar frequência
                                                </label>
                                                <label class="custom-radio">
                                                    <input type="radio" name="diabetes-modification-type" value="stop">
                                                    <span class="radio-mark"></span>
                                                    Interromper medicamento
                                                </label>
                                                <label class="custom-radio">
                                                    <input type="radio" name="diabetes-modification-type" value="pause">
                                                    <span class="radio-mark"></span>
                                                    Pausar temporariamente
                                                </label>
                                            </div>
                                        </div>
                                        <div id="diabetes-newFrequencySection" class="hidden">
                                            <label for="diabetes-novaFrequencia" class="block text-sm font-medium text-gray-700 mb-1">Nova Frequência</label>
                                            <select id="diabetes-novaFrequencia"
                                                class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                                                <option value="1">1x ao dia</option>
                                                <option value="2">2x ao dia</option>
                                                <option value="3">3x ao dia</option>
                                                <option value="4">4x ao dia</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div>
                                        <label for="diabetes-modificacaoObservacoes" class="block text-sm font-medium text-gray-700 mb-1">Motivo da Modificação</label>
                                        <textarea id="diabetes-modificacaoObservacoes"
                                            class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent h-20"
                                            placeholder="Descreva o motivo da modificação..."></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- Seção: Modificar Insulina -->
                            <div id="diabetes-modifyInsulinSection" class="space-y-4 hidden">
                                <h6 class="font-medium text-gray-900 flex items-center">
                                    <div class="w-5 h-5 flex items-center justify-center text-orange-600 mr-2">
                                        <i class="ri-edit-line"></i>
                                    </div>
                                    Editar Insulina
                                </h6>
                                <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                                    <div class="grid grid-cols-1 gap-4">
                                        <!-- Tipo de Insulina -->
                                        <div>
                                            <label for="diabetes-editTipoInsulina" class="block text-sm font-medium text-gray-700 mb-1">Tipo de Insulina</label>
                                            <select id="diabetes-editTipoInsulina"
                                                class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                                <option value="">Selecione o tipo de insulina</option>
                                                <option value="Insulina NPH">Insulina NPH</option>
                                                <option value="Insulina Regular">Insulina Regular</option>
                                                <option value="Insulina Glargina">Insulina Glargina</option>
                                                <option value="Insulina Lispro">Insulina Lispro</option>
                                            </select>
                                        </div>

                                        <!-- Frequência -->
                                        <div>
                                            <label for="diabetes-editFrequenciaInsulina" class="block text-sm font-medium text-gray-700 mb-1">Frequência por Dia</label>
                                            <select id="diabetes-editFrequenciaInsulina"
                                                class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                                <option value="1">1x ao dia</option>
                                                <option value="2">2x ao dia</option>
                                                <option value="3">3x ao dia</option>
                                                <option value="4">4x ao dia</option>
                                            </select>
                                        </div>

                                        <!-- Container para doses dinâmicas -->
                                        <div id="diabetes-editDosesContainer">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Doses por Horário</label>
                                            <div id="diabetes-editDosesInputs" class="space-y-2">
                                                <!-- Doses serão geradas dinamicamente via JavaScript -->
                                            </div>
                                        </div>

                                        <!-- Data de Início (opcional) -->
                                        <div>
                                            <label for="diabetes-editInsulinaDataInicio" class="block text-sm font-medium text-gray-700 mb-1">Data de Início <span class="text-gray-500 text-xs">(opcional)</span></label>
                                            <input type="date" id="diabetes-editInsulinaDataInicio"
                                                class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                        </div>

                                        <!-- Motivo da Modificação -->
                                        <div>
                                            <label for="diabetes-editInsulinaMotivoModificacao" class="block text-sm font-medium text-gray-700 mb-1">Motivo da Modificação</label>
                                            <textarea id="diabetes-editInsulinaMotivoModificacao"
                                                class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent h-20"
                                                placeholder="Descreva o motivo da modificação (ex: ajuste de dose, mudança de horário)"></textarea>
                                        </div>

                                        <!-- Observações -->
                                        <div>
                                            <label for="diabetes-editInsulinaObservacoes" class="block text-sm font-medium text-gray-700 mb-1">Observações</label>
                                            <textarea id="diabetes-editInsulinaObservacoes"
                                                class="w-full border border-gray-300 rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent h-20"
                                                placeholder="Observações sobre a insulina (ex: técnica de aplicação, rotação de locais, etc.)"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="p-6 border-t flex justify-end flex-shrink-0">
                <button id="diabetes-cancelTreatmentBtn" type="button"
                    class="bg-gray-200 text-gray-800 py-2 px-4 rounded mr-2 focus:outline-none focus:ring-2 focus:ring-gray-300 !rounded-button whitespace-nowrap">Cancelar</button>
                <button id="diabetes-saveTreatmentBtn" type="button"
                    class="bg-amber-600 text-white py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-amber-600/20 hover:bg-amber-700 !rounded-button whitespace-nowrap">Salvar Alterações</button>
            </div>
        </div>
    </div>


    <!-- Modal para Avaliar Tratamento (Tipo 4) -->
    <div id="evaluate-treatment-modal-diabetes" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center p-6 border-b flex-shrink-0">
                <h3 class="text-xl font-semibold text-gray-900">Avaliar Tratamento</h3>
                <button id="close-evaluate-treatment-modal-diabetes" type="button" class="text-gray-400 hover:text-gray-500">
                    <i class="ri-close-line text-xl"></i>
                </button>
            </div>

            <div class="p-6 overflow-y-auto">
                <form id="evaluate-treatment-form-diabetes" class="space-y-6">

                    <!-- Seção de Exames Laboratoriais -->
                    <div class="bg-blue-50 rounded-lg p-4">
                        <h4 class="text-lg font-medium text-gray-900 mb-2">Dados de Exames Laboratoriais</h4>
                        <p class="text-xs text-blue-600 mb-3"><strong>Obrigatório:</strong> Preencher Hemoglobina Glicada OU pelo menos um Mapeamento Residencial</p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Hemoglobina Glicada (%) <span class="text-blue-600">*</span></label>
                                <input type="number" step="0.1" id="eval-hemoglobina-diabetes" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ex: 7.5">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Glicemia Média (mg/dL)</label>
                                <input type="number" id="eval-glicemia-media-diabetes" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ex: 150">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Glicemia de Jejum (mg/dL)</label>
                                <input type="number" id="eval-glicemia-jejum-diabetes" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ex: 120">
                            </div>
                        </div>
                        <div class="mt-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Data dos Exames <span class="text-red-600">*</span></label>
                            <input type="date" id="eval-exams-date-diabetes" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <p class="text-xs text-gray-500 mt-1">Obrigatório se preencheu algum dado de exame acima</p>
                        </div>
                    </div>

                    <!-- Seção de Mapeamentos Residenciais de Glicemia -->
                    <div class="bg-green-50 rounded-lg p-4">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="text-lg font-medium text-gray-900">Mapeamentos Residenciais de Glicemia <span class="text-green-600">*</span></h4>
                            <button type="button" id="add-mapping-btn-diabetes" class="bg-green-600 text-white py-2 px-4 rounded text-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500">
                                <i class="ri-add-line mr-1"></i>Adicionar Período
                            </button>
                        </div>
                        <p class="text-xs text-green-600 mb-3"><strong>Obrigatório:</strong> Pelo menos um mapeamento OU Hemoglobina Glicada preenchida</p>

                        <div id="mappings-container-diabetes" class="space-y-4">
                            <!-- Mapeamentos serão adicionados dinamicamente -->
                        </div>
                    </div>

                    <!-- Seção de Avaliação e Observações -->
                    <div class="bg-amber-50 rounded-lg p-4">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">Avaliação do Tratamento</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Status do Controle <span class="text-red-600">*</span></label>
                                <select id="eval-control-status-diabetes" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                                    <option value="">Selecione o status</option>
                                    <option value="Tratamento adequado">Tratamento adequado</option>
                                    <option value="Tratamento aceitável">Tratamento aceitável</option>
                                    <option value="Tratamento descompensado">Tratamento descompensado</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Data da Avaliação <span class="text-red-600">*</span></label>
                                <input type="date" id="eval-assessment-date-diabetes" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                            </div>
                        </div>
                        <div class="mt-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Observações da Avaliação</label>
                            <textarea id="eval-observations-diabetes" rows="4" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent" placeholder="Análise dos resultados, conduta, recomendações..."></textarea>
                        </div>
                        <div class="mt-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Mudança Proposta no Tratamento</label>
                            <textarea id="eval-mudanca-proposta-diabetes" rows="3" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent" placeholder="Descreva as mudanças propostas no tratamento (ajuste de medicação, novo medicamento, etc.)"></textarea>
                        </div>
                        <div class="mt-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Responsável pela Avaliação <span class="text-red-600">*</span></label>
                            <input type="text" id="eval-responsible-diabetes" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent" placeholder="Nome do profissional responsável">
                        </div>
                    </div>

                    <div class="pt-4 flex justify-end space-x-3">
                        <button type="button" id="cancel-evaluate-treatment-btn-diabetes" class="bg-gray-200 text-gray-800 py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-gray-300">Cancelar</button>
                        <button type="button" id="save-evaluate-treatment-btn-diabetes" class="bg-amber-600 text-white py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-amber-600/20 hover:bg-amber-700">Salvar Avaliação</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Opções de Relatório -->
    <div id="modal-opcoes-relatorio-diabetes" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10">
                            <i class="ri-file-chart-line text-blue-600 text-xl"></i>
                        </div>
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">
                                Gerar Relatório de Pacientes
                            </h3>
                            <div class="mt-4 space-y-3">
                                <p class="text-sm text-gray-500 mb-4">
                                    Selecione quais pacientes deseja incluir no relatório:
                                </p>
                                <button id="btn-relatorio-selecionados" class="w-full flex items-center justify-between p-4 border-2 border-blue-200 rounded-lg hover:bg-blue-50 hover:border-blue-400 transition-colors">
                                    <div class="flex items-center">
                                        <i class="ri-checkbox-multiple-line text-blue-600 text-xl mr-3"></i>
                                        <div class="text-left">
                                            <div class="font-medium text-gray-900">Pacientes Selecionados</div>
                                            <div class="text-xs text-gray-500">Apenas os pacientes marcados com checkbox</div>
                                        </div>
                                    </div>
                                    <i class="ri-arrow-right-line text-gray-400"></i>
                                </button>
                                <button id="btn-relatorio-pagina-atual" class="w-full flex items-center justify-between p-4 border-2 border-blue-200 rounded-lg hover:bg-blue-50 hover:border-blue-400 transition-colors">
                                    <div class="flex items-center">
                                        <i class="ri-file-list-3-line text-blue-600 text-xl mr-3"></i>
                                        <div class="text-left">
                                            <div class="font-medium text-gray-900">Página Atual</div>
                                            <div class="text-xs text-gray-500">Todos os pacientes desta página</div>
                                        </div>
                                    </div>
                                    <i class="ri-arrow-right-line text-gray-400"></i>
                                </button>
                                <button id="btn-relatorio-todos" class="w-full flex items-center justify-between p-4 border-2 border-blue-200 rounded-lg hover:bg-blue-50 hover:border-blue-400 transition-colors">
                                    <div class="flex items-center">
                                        <i class="ri-file-list-2-line text-blue-600 text-xl mr-3"></i>
                                        <div class="text-left">
                                            <div class="font-medium text-gray-900">Todos os Pacientes</div>
                                            <div class="text-xs text-gray-500">Incluir todos os pacientes (todas as páginas)</div>
                                        </div>
                                    </div>
                                    <i class="ri-arrow-right-line text-gray-400"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" id="btn-cancelar-relatorio-diabetes" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm">
                        Cancelar
                    </button>
                </div>
            </div>
        </div>
    </div>

</body>
</html>